<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myweb.app.mapper.AdminMapper">

  <!--
  //检测管理员登录
  boolean validateAdminLogin(@Param("adminname")
  String adminname ,@Param("adminpassword") String adminpassword);-->
  <select id="validateAdminLogin" resultType="int" >
    SELECT COUNT(*) FROM admin WHERE username = #{adminname} AND password = #{adminpassword}
  </select>

  <!--管理员获取已经注册的用户的列表-->
  <select id="getAllUser" resultType="User">
    SELECT * FROM user
  </select>

  <!--管理员增加商品
  int adminAddFood(Foods foods);-->
  <insert id="adminAddFood" parameterType="Foods" useGeneratedKeys="true" keyColumn="id">
    insert into foods (
    type,
    name,
    price,
    img,
    enName,
    status,
    foods.desc) values (
    #{type},
    #{name},
    #{price},
    #{img},
    #{enName},
    #{status},
    #{desc}
    )
  </insert>

  <!--/**
   * 根据openid获取用户的昵称
   * @param openid-->
  <select id="getUserNameByOpenid" resultType="String" >
    SELECT nickName FROM user WHERE openId = #{openid}
  </select>

  <!--/**
   * 管理员获取所有的订单
   * @return
   */
  Order getOrderList();-->
  <select id="getOrderList" resultType="Order">
    SELECT  * FROM rest.order order by id desc
  </select>

</mapper>